<!--- DO NOT EDIT: generated by resolver/tools/generate_schemas_md.py on 2025-10-03Z -->

# Resolver Canonical Schemas

## Table of contents

- [facts](#facts)

## facts

| Name | Type | Required | Enum/Format | Description |
| --- | --- | --- | --- | --- |
| as_of_date |  | yes |  |  |
| confidence |  | yes |  |  |
| country_name |  | yes |  |  |
| definition_text |  | yes |  |  |
| doc_title |  | yes |  |  |
| event_id |  | yes |  |  |
| hazard_class |  | yes |  |  |
| hazard_code |  | yes |  |  |
| hazard_label |  | yes |  |  |
| ingested_at |  | yes |  |  |
| iso3 |  | yes |  |  |
| method |  | yes |  |  |
| metric | enum | yes | in_need, affected, displaced, cases, fatalities<br>events, participants |  |
| publication_date |  | yes |  |  |
| publisher |  | yes |  |  |
| revision |  | yes |  |  |
| source_type |  | yes |  |  |
| source_url |  | yes |  |  |
| unit | enum | yes | persons, persons_cases, events |  |
| value |  | yes |  |  |
| delta_negative_clamped | integer | no |  |  |
| first_observation | integer | no |  |  |
| rebase_flag | integer | no |  |  |
| series_semantics | string | no | stock, new |  |
| value_new | number | no |  |  |
| value_stock | number | no |  |  |

## Debug & Test Flags (UNHCR)

- `RESOLVER_DEBUG=1` enables detailed debug logging and summary counters for UNHCR ingestion clients.
- `UNHCR_TEST_ISO3=GRC` (or `test_iso3` in `resolver/ingestion/config/unhcr.yml`) narrows Population API runs to the specified country for smoke testing.
- Summary counters include `raw_count`, `after_keymap`, `after_date_parse`, `after_country_match`, `after_window`, `final_rows`, `dropped_value_cast`, `dropped_country_unmatched`, `country_unmatched`, and `page_cap_hit`.

## Registry helpers

- `load_registries()` returns `(countries_df, shocks_df)` for ingestion clients.
- Use `build_country_name_index(countries_df)` to derive the UNHCR country name â†’ ISO3 lookup when needed.
