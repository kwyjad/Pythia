# Pythia
# Copyright (c) 2025 Kevin Wyjad
# Licensed under the Pythia Non-Commercial Public License v1.0.
# See the LICENSE file in the project root for details.

# UNHCR ODP JSON â†’ canonical monthly time-series mapping
#
# Each entry in the `series` list describes how to normalize a widget into the
# canonical Resolver schema used by resolver.ingestion.odp_series. Connector
# code should prefer updating this file over editing Python when a widget
# changes labels, fields, or semantics.

defaults:
  frequency: monthly
  series_semantics: stock
  unit: persons

series:
  - id: refugees_by_origin
    label_regex: "(?i)refugees by origin"
    metric: refugees_total
    series_semantics: stock
    frequency: monthly
    value_field: value
    date_field: date
    date_format: "%Y-%m-%d"
    iso3_field: iso3
    origin_iso3_field: origin_iso3
    admin_name_field: null
    required_fields: [date, value, iso3]
  - id: asylum_applications
    label_regex: "(?i)asylum applications"
    metric: asylum_applications_total
    series_semantics: flow
    frequency: monthly
    value_field: value
    date_field: date
    date_format: "%Y-%m-%d"
    iso3_field: iso3
    origin_iso3_field: origin_iso3
    admin_name_field: null
    required_fields: [date, value, iso3]
