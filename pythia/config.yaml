# Pythia
# Copyright (c) 2025 Kevin Wyjad
# Licensed under the Pythia Non-Commercial Public License v1.0.
# See the LICENSE file in the project root for details.

app:
  cron_enabled: false
  schedule: "0 6 1 * *"          # monthly, 06:00; ignored when cron_enabled=false
  frequency: "monthly"            # can later be "quarterly"
  db_url: "duckdb:///data/resolver.duckdb"

security:
  api_token_header: "X-Pythia-Token"
  api_tokens: ["CHANGE_THIS_TOKEN"]

hazards_allowed: ["FL","DR","TC","HW","ACE","DI","CU","EC","PHE"]   # MULTI/OT disabled; ACO retired in favour of ACE

hs:
  horizon_months: 6
  prompt_version: "1.0.0"

researcher:
  prompt_version: "1.0.0"
  web_search: true
  sources: ["news","metaculus","manifold"]
  web_research:
    enabled: false                 # mirror of PYTHIA_WEB_RESEARCH_ENABLED
    backend: "gemini"              # gemini|exa|perplexity|auto
    max_results: 10
    timeout_sec: 60
    recency_days: 120
    cache: true
    include_structural: true
    budget_usd_per_run: null       # hard cap; null = unlimited
    max_calls_per_question: null   # hard cap; null = unlimited

llm:
  # Active profile: "test" (cheap) or "prod" (frontier).
  # Override via PYTHIA_LLM_PROFILE env var.
  profile: "prod"

  profiles:
    test:
      # Cheap models for development / CI
      ensemble:
        - google:gemini-3-flash-preview

    prod:
      # SPD forecast ensemble â€” add/remove models by editing this list.
      # Format: provider:model_id  (one per line)
      ensemble:
        - openai:gpt-5.2
        - anthropic:claude-sonnet-4-6
        - google:gemini-3.1-pro-preview
        - google:gemini-3-flash-preview
        - kimi:kimi-k2.5
        - deepseek:deepseek-reasoner
        - openai:gpt-5-mini

      # Purpose-specific model overrides (optional, defaults to ensemble members)
      hs_fallback: openai:gpt-5.2
      scenario_writer: google:gemini-3-flash-preview

forecaster:
  horizons: [1,2,3,4,5,6]
  metrics: ["PIN","PA"]
  class_bins: ["<5k","5k-<25k","25k-<100k","100k-<500k",">=500k"]
  aggregator: { strategy: "Bayes_MC", version: "1.0.0" }

ranking:
  representative_values:
    "<5k": 2500
    "5k-<25k": 15000
    "25k-<100k": 62500
    "100k-<500k": 300000
    ">=500k": 700000
  population_source: "worldpop"

api:
  host: "0.0.0.0"
  port: 8080
  base_path: "/v1"
